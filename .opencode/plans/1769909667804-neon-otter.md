# Plan: Add Node.js Subpath Imports (#) to Monorepo

## Overview

Add `#` imports (Node.js subpath imports) to all packages and apps in the monorepo, enabling cleaner internal imports like `import { Button } from '#/components/Button'`.

## Import Pattern

**Pattern:** `"#/*": "./src/*"` (with slash)

**Example usage:**

```typescript
import { Button } from "#/components/Button";
import { formatDate } from "#/utils/date";
```

This pattern is used by Vite, vue-vben-admin, jellyfin-vue, and Deno. The alternative `"#*"` (without slash) is also valid but we're using the slash variant for visual similarity to the common `@/` pattern.

## Files to Modify

### 1. `packages/acme-core/package.json`

Add `imports` field:

```json
{
  "name": "@acme/core",
  "imports": {
    "#/*": "./src/*"
  },
  ...
}
```

### 2. `packages/acme-utils/package.json`

Add `imports` field:

```json
{
  "name": "@acme/utils",
  "imports": {
    "#/*": "./src/*"
  },
  ...
}
```

### 3. `apps/docs/package.json`

Add `imports` field:

```json
{
  "name": "@acme/docs",
  "imports": {
    "#/*": "./src/*"
  },
  ...
}
```

### 4. `packages/acme-tsconfig/base.json`

Add `module: "NodeNext"` to ensure proper resolution:

```json
{
  "compilerOptions": {
    "module": "NodeNext",
    "moduleResolution": "NodeNext",
    ...
  }
}
```

**Note:** The Next.js app uses `moduleResolution: "Bundler"` (via `nextjs.json`), which also supports subpath imports natively.

## No Changes Needed

- **`packages/acme-tsconfig`** - Config-only package, no src imports
- **`packages/eslint-config`** - Config-only package, no src imports
- **`tsconfig.json` files** - No `paths` needed; TypeScript resolves via `package.json` imports field automatically

## Implementation Steps

1. Edit `packages/acme-tsconfig/base.json` - add `"module": "NodeNext"`
2. Edit `packages/acme-core/package.json` - add `imports` field
3. Edit `packages/acme-utils/package.json` - add `imports` field
4. Edit `apps/docs/package.json` - add `imports` field

## Verification

After implementation:

```bash
# 1. Build all packages
pnpm build

# 2. Start Next.js dev server to verify resolution
pnpm --filter @acme/docs dev

# 3. Test an actual import - create a test file using # imports
```

Test by adding a sample import in `apps/docs/src/app/page.tsx`:

```typescript
// Before (relative)
import { Button } from "@acme/core";

// After (can also use within package)
// In @acme/core, could import: import { something } from '#/utils/helper';
```

## Notes

- File extensions are NOT required in imports (bundlers handle resolution)
- Both `moduleResolution: "NodeNext"` (packages) and `"Bundler"` (Next.js) support subpath imports
- No ESLint configuration changes needed unless you want custom import ordering
